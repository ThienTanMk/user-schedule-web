<div class="w-80 h-screen bg-slate-50 border-r border-slate-200 flex flex-col">
  <!-- User Info -->
  <div class="p-6 border-b border-slate-200">
    <div class="flex items-center gap-3">
      <div
        class="w-10 h-10 bg-slate-200 rounded-full flex items-center justify-center"
      >
        <i class="fas fa-user text-slate-600 text-base"></i>
      </div>
      <div>
        <p class="text-sm font-medium text-slate-900">
          {{ userEmail || "user@example.com" }}
        </p>
        <p class="text-xs text-slate-500">Quản lý lịch họp</p>
      </div>
    </div>
  </div>

  <!-- Navigation and Meeting List Section -->
  <div class="flex-1 flex flex-col">
    <!-- Navigation -->
    <nav class="px-4 py-6 space-y-2">
      <button
        *ngIf="!fromAdmin"
        class="w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-left transition-colors text-sm font-medium"
        [ngClass]="
          activeMenuItem === 'agent'
            ? 'bg-blue-50 text-blue-700 border border-blue-200'
            : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'
        "
        (click)="selectMenuItem('agent')"
      >
        <i class="fas fa-robot w-5 text-base"></i>
        <span>AI Agent</span>
      </button>
      <button
        *ngIf="fromAdmin"
        class="w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-left transition-colors text-sm font-medium"
        [ngClass]="
          activeMenuItem === 'back'
            ? 'bg-blue-50 text-blue-700 border border-blue-200'
            : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'
        "
        (click)="goBackToAdmin()"
      >
        <i class="fas fa-arrow-left w-5 text-base"></i>
        <span>Trở về</span>
      </button>
      <button
        *ngIf="!fromAdmin"
        class="w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-left transition-colors text-sm font-medium"
        [ngClass]="
          activeMenuItem === 'room'
            ? 'bg-blue-50 text-blue-700 border border-blue-200'
            : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'
        "
        (click)="selectMenuItem('room')"
      >
        <i class="fa-solid fa-house"></i>
        <span>Xem Phòng họp</span>
      </button>
    </nav>

    <!-- Meeting List Section -->
    <div
      class="p-6 pb-4 flex items-center justify-between cursor-pointer"
      (click)="toggleMeetingHistory()"
    >
      <div class="flex items-center gap-2">
        <h2 class="text-lg font-semibold text-slate-900">Danh sách lịch họp</h2>
        <span class="text-xs bg-slate-200 text-slate-700 rounded px-2 py-0.5">{{
          meetingHistory.length
        }}</span>
      </div>
      <div class="flex items-center gap-2">
        <i
          class="fas"
          [ngClass]="
            showMeetingHistory ? 'fa-chevron-down' : 'fa-chevron-right'
          "
          class="text-slate-600 text-sm"
        ></i>
      </div>
    </div>

    <!-- Meeting List -->
    <div
      class="flex-1 overflow-y-auto px-6 pb-6 space-y-3"
      *ngIf="showMeetingHistory"
    >
      <ng-container *ngIf="meetingHistory.length > 0; else empty">
        <div
          *ngFor="let meeting of meetingHistory"
          class="rounded-lg border cursor-pointer transition-all hover:shadow-sm p-4"
          [ngStyle]="{
            'background-color':
              meeting.scheduleId.toString() === selectedMeetingId
                ? '#e0f2fe'
                : !meeting.isRead
                ? '#fef08a'
                : '#f1f5f9',
            'border-color':
              meeting.scheduleId.toString() === selectedMeetingId ? '#38bdf8' : 'transparent'
          }"
          (click)="selectMeeting(meeting)"
        >
          <h3
            class="font-medium text-sm mb-2"
            [ngClass]="
              meeting.scheduleId.toString() === selectedMeetingId
                ? 'text-sky-900'
                : 'text-slate-900'
            "
          >
            {{ meeting.title }}
          </h3>
          <div class="space-y-1 text-xs text-slate-600">
            <div class="flex items-center gap-2">
              <i class="fas fa-calendar w-3 h-3"></i>
              <span>{{ meeting.formattedDate }}</span>
            </div>
            <div class="flex items-center gap-2">
              <i class="fas fa-clock w-3 h-3"></i>
              <span>{{ meeting.formattedTime }}</span>
            </div>
            <div class="flex items-center gap-2">
              <i class="fas fa-building w-3 h-3"></i>
              <span>{{ meeting.room.name }} {{ meeting.room.location }}</span>
            </div>
          </div>
          <div *ngIf="meeting.scheduleId.toString() === selectedMeetingId" class="mt-2">
            <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded"
              >Đang chọn</span
            >
          </div>
        </div>
      </ng-container>

      <ng-template #empty>
        <div class="text-center py-4">
          <p class="text-xs text-slate-400">Chưa có lịch họp nào</p>
        </div>
      </ng-template>
    </div>
  </div>

  <!-- Sign Out Button -->
  <div class="p-6 pt-0">
    <button
      class="w-full py-3 px-4 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors text-sm flex items-center justify-center gap-2"
      (click)="signOut()"
    >
      <i class="fas fa-right-from-bracket w-4 h-4"></i>
      Đăng xuất
    </button>
  </div>
</div>
